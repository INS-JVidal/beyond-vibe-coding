---
import { t, getOtherLang, type Lang } from '../i18n/utils';
import { languages } from '../i18n/ui';

interface Props {
	lang?: Lang;
}

const { lang = 'es' } = Astro.props;
const otherLang = getOtherLang(lang);
const currentPath = Astro.url.pathname;

const links = [
	{ href: `/${lang}/`, label: t('nav.home', lang) },
	{ href: `/${lang}/blog`, label: t('nav.blog', lang) },
];

// Build the equivalent URL in the other language
const switchUrl = currentPath.replace(`/${lang}`, `/${otherLang}`);
---

<header class="site-header">
	<div class="site-header__inner container">
		<a href={`/${lang}/`} class="site-header__logo">
			Prompt L<span class="site-header__accent">Ãº</span>cido
		</a>
		<nav class="site-header__nav" aria-label={t('nav.aria', lang)}>
			{links.map(({ href, label }) => (
				<a
					href={href}
					class:list={['site-header__link', { active: currentPath === href || (href !== `/${lang}/` && currentPath.startsWith(href)) }]}
				>
					{label}
				</a>
			))}
			<a href={switchUrl} class="site-header__link site-header__lang">
				{languages[otherLang]}
			</a>
		</nav>
	</div>
</header>

<style>
	.site-header {
		border-bottom: 1px solid var(--border);
		background: var(--bg);
		position: sticky;
		top: 0;
		z-index: 100;
	}

	.site-header__inner {
		display: flex;
		align-items: center;
		justify-content: space-between;
		height: 3.5rem;
	}

	.site-header__logo {
		font-family: var(--font-heading);
		font-size: 1.25rem;
		font-weight: 700;
		color: var(--text);
		text-decoration: none;
		letter-spacing: -0.01em;
	}

	.site-header__accent {
		font-family: var(--font-body);
		color: var(--accent);
		font-style: italic;
	}

	.site-header__nav {
		display: flex;
		gap: 1.5rem;
	}

	.site-header__link {
		font-family: var(--font-ui);
		font-size: 0.95rem;
		font-weight: 500;
		color: var(--text-muted);
		text-decoration: none;
		transition: color 0.15s;
	}

	.site-header__link:hover,
	.site-header__link.active {
		color: var(--text);
	}

	.site-header__lang {
		border-left: 1px solid var(--border);
		padding-left: 1.5rem;
	}

	@media (max-width: 768px) {
		.site-header__logo {
			white-space: nowrap;
			font-size: 1.1rem;
		}

		.site-header__nav {
			gap: 1rem;
		}

		.site-header__lang {
			padding-left: 1rem;
		}
	}
</style>
